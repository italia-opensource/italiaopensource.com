{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.12.0/.schema/devbox.schema.json",
  "packages": [
    "python@3.12",
    "doppler@3.69.0",
    "yarn@1.22.22",
    "nodejs@22.8.0",
    "terraform@1.9.5",
    "tflint@0.52.0"
  ],
  "env": {
    "INFRASTRUCTURE_PATH": "${DEVBOX_PROJECT_ROOT}/infrastructure",
    "WEBSITE_PATH": "${DEVBOX_PROJECT_ROOT}/website"
  },
  "include": [],
  "shell": {
    "init_hook": [". ${DEVBOX_PROJECT_ROOT}/.activate", "devbox run setup"],
    "scripts": {
      "infra": ["cd ${INFRASTRUCTURE_PATH} && make $@ ; cd -"],
      "website": ["cd ${WEBSITE_PATH} && make $@ ; cd -"],
      "setup": [
        ". ${DEVBOX_PROJECT_ROOT}/.activate",
        "chmod +x ${DEVBOX_PROJECT_ROOT}/scripts/*",
        "pip3 install -r ${DEVBOX_PROJECT_ROOT}/requirements.txt",
        "pre-commit install",
        "devbox run website setup"
      ],
      "deploy": ["${DEVBOX_PROJECT_ROOT}/scripts/deploy.sh"],
      "doppler": ["${DEVBOX_PROJECT_ROOT}/scripts/doppler.sh"],
      "lint": ["pre-commit run --all-files"],
      "tests": [
        ". ${DEVBOX_PROJECT_ROOT}/.activate",
        "devbox run lint",
        "devbox run website pages-check",
        "devbox run website build",
        "devbox run infra plan"
      ]
    }
  }
}
